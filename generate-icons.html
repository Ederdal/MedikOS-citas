<!DOCTYPE html>
<html>
<head>
  <title>Generador de Íconos PWA</title>
</head>
<body>
  <h2>Generador de Íconos PWA - MedikOS</h2>
  <p>1. Sube tu logo (medilogop.png)</p>
  <input type="file" id="upload" accept="image/*">
  <br><br>
  <button onclick="generateIcons()">Generar íconos 192x192 y 512x512</button>
  <div id="output"></div>

  <script>
    let originalImage = null;
    
    document.getElementById('upload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          originalImage = img;
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });

    function generateIcons() {
      if (!originalImage) {
        alert('Por favor sube una imagen primero');
        return;
      }

      const sizes = [192, 512];
      const output = document.getElementById('output');
      output.innerHTML = '<h3>Íconos generados:</h3>';

      sizes.forEach(size => {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');
        
        // Fondo blanco
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0, 0, size, size);
        
        // Dibujar imagen centrada
        const scale = Math.min(size / originalImage.width, size / originalImage.height) * 0.8;
        const w = originalImage.width * scale;
        const h = originalImage.height * scale;
        const x = (size - w) / 2;
        const y = (size - h) / 2;
        
        ctx.drawImage(originalImage, x, y, w, h);
        
        // Crear link de descarga
        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `icon-${size}x${size}.png`;
          a.textContent = `Descargar icon-${size}x${size}.png`;
          a.style.display = 'block';
          a.style.margin = '10px 0';
          output.appendChild(a);
        });

        // Mostrar preview
        const preview = canvas.cloneNode();
        preview.getContext('2d').drawImage(canvas, 0, 0);
        preview.style.width = '100px';
        preview.style.margin = '10px';
        output.appendChild(preview);
      });
    }
  </script>
</body>
</html>
